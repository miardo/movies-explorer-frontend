(this["webpackJsonpdiplom-frontend"]=this["webpackJsonpdiplom-frontend"]||[]).push([[0],Array(28).concat([function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(20),s=n.n(i),o=n(4),r=(n(28),n(14)),l=n(2),d=(n(29),n(3)),j=(n(30),n(0));var m=function(){var e=Object(d.h)(),t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],i=n[1];return Object(j.jsx)("nav",{className:"navigation ".concat(a&&"navigation_opened-burger-menu"),children:Object(j.jsxs)("div",{className:"navigation__menu ".concat(a&&"navigation__menu_opened-burger-menu"),children:[Object(j.jsx)("button",{className:"navigation__burger-btn ".concat(a&&"navigation__burger-btn_close"),onClick:function(){i(!1===a)}}),Object(j.jsxs)("ul",{className:"navigation__buttons-list ".concat(a&&"navigation__buttons-list_opened-burger-menu"),children:[Object(j.jsx)("li",{className:"navigation__button",children:Object(j.jsx)(o.b,{to:"/",className:"navigation__main-button ".concat("/"===e.pathname&&"navigation__link_active"," ").concat(a&&"navigation__main-button_opened-burger-menu"),children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(j.jsx)("li",{className:"navigation__button",children:Object(j.jsx)(o.b,{to:"/movies",activeClassName:"navigation__link_active",className:"navigation__all-films-button ".concat(a&&"navigation__all-films-button_opened-burger-menu"),children:"\u0424\u0438\u043b\u044c\u043c\u044b"})}),Object(j.jsx)("li",{className:"navigation__button",children:Object(j.jsx)(o.b,{to:"/saved-movies",activeClassName:"navigation__link_active",className:"navigation__saved-films-button ".concat(a&&"navigation__saved-films-button_opened-burger-menu"),children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"})})]}),Object(j.jsx)(o.b,{to:"/profile",className:"navigation__acc ".concat(a&&"navigation__acc_opened-burger-menu"),children:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"})]})})},u=(n(37),n.p+"static/media/header-logo.250bb8ba.svg");var b=function(){var e=Object(d.h)();return Object(j.jsxs)("header",{className:"header ".concat("/"!==e.pathname&&"header_login"," ").concat(("/saved-movies"===e.pathname||"/movies"===e.pathname||"/"===e.pathname||"/profile"===e.pathname)&&"header_unhidden"),children:[Object(j.jsx)(o.b,{to:"/",className:"header__logo-link",children:Object(j.jsx)("img",{className:"header__logo",src:u,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})}),"/"===e.pathname?Object(j.jsxs)("ul",{className:"header__buttons-list",children:[Object(j.jsx)("li",{className:"header__button",children:Object(j.jsx)(o.b,{to:"/signup",className:"header__reg-button",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),Object(j.jsx)("li",{className:"header__button",children:Object(j.jsx)(o.b,{to:"/signin",className:"header__login-button",children:"\u0412\u043e\u0439\u0442\u0438"})})]}):Object(j.jsx)(m,{})]})};n(38);var h=function(){return Object(j.jsx)("section",{className:"promo",children:Object(j.jsx)("h1",{className:"promo__title",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442\u0430 \u0412\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438."})})};n(39);var _=function(){return Object(j.jsx)("section",{className:"nav-tab",children:Object(j.jsx)("nav",{className:"nav-tab__menu",children:Object(j.jsxs)("ul",{className:"nav-tab__menu-list",children:[Object(j.jsx)("li",{className:"nav-tab__menu-text",children:Object(j.jsx)("a",{href:"#about-project",className:"nav-tab__menu-link",children:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"})}),Object(j.jsx)("li",{className:"nav-tab__menu-text",children:Object(j.jsx)("a",{href:"#techs",className:"nav-tab__menu-link",children:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"})}),Object(j.jsx)("li",{className:"nav-tab__menu-text",children:Object(j.jsx)("a",{href:"#about-me",className:"nav-tab__menu-link",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"})})]})})})};n(40);var p=function(){return Object(j.jsxs)("section",{className:"about-project",children:[Object(j.jsx)("h2",{className:"about-project__title",id:"about-project",children:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"}),Object(j.jsxs)("div",{className:"about-project__description",children:[Object(j.jsxs)("article",{className:"about-project__description-block",children:[Object(j.jsx)("h3",{className:"about-project__description-block-title",children:"\u0414\u0438\u043f\u043b\u043e\u043c\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u043b 5 \u044d\u0442\u0430\u043f\u043e\u0432"}),Object(j.jsx)("p",{className:"about-project__description-block-text",children:"\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u043d\u0430, \u0440\u0430\u0431\u043e\u0442\u0443 \u043d\u0430\u0434 \u0431\u044d\u043a\u0435\u043d\u0434\u043e\u043c, \u0432\u0451\u0440\u0441\u0442\u043a\u0443, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0444\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0438."})]}),Object(j.jsxs)("article",{className:"about-project__description-block",children:[Object(j.jsx)("h3",{className:"about-project__description-block-title",children:"\u041d\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0434\u0438\u043f\u043b\u043e\u043c\u0430 \u0443\u0448\u043b\u043e 5 \u043d\u0435\u0434\u0435\u043b\u044c"}),Object(j.jsx)("p",{className:"about-project__description-block-text",children:"\u0423 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u044d\u0442\u0430\u043f\u0430 \u0431\u044b\u043b \u043c\u044f\u0433\u043a\u0438\u0439 \u0438 \u0436\u0451\u0441\u0442\u043a\u0438\u0439 \u0434\u0435\u0434\u043b\u0430\u0439\u043d, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0443\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0441\u043e\u0431\u043b\u044e\u0434\u0430\u0442\u044c, \u0447\u0442\u043e\u0431\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0449\u0438\u0442\u0438\u0442\u044c\u0441\u044f."})]})]}),Object(j.jsxs)("div",{className:"about-project__timeline",children:[Object(j.jsxs)("article",{className:"about-project__timeline-block",children:[Object(j.jsx)("p",{className:"about-project__timeline-block-header",children:"1 \u043d\u0435\u0434\u0435\u043b\u044f"}),Object(j.jsx)("p",{className:"about-project__timeline-block-footer",children:"Back-end"})]}),Object(j.jsxs)("article",{className:"about-project__timeline-block",children:[Object(j.jsx)("p",{className:"about-project__timeline-block-header about-project__timeline-block-header_style",children:"4 \u043d\u0435\u0434\u0435\u043b\u0438"}),Object(j.jsx)("p",{className:"about-project__timeline-block-footer",children:"Front-end"})]})]})]})};n(41);var v=function(){return Object(j.jsxs)("section",{className:"techs",children:[Object(j.jsx)("h2",{className:"techs__title",id:"techs",children:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"}),Object(j.jsxs)("div",{className:"techs__description",children:[Object(j.jsx)("h3",{className:"techs__description-title",children:"7 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0439"}),Object(j.jsx)("p",{className:"techs__description-text",children:"\u041d\u0430 \u043a\u0443\u0440\u0441\u0435 \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043c\u044b \u043e\u0441\u0432\u043e\u0438\u043b\u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043b\u0438 \u0432 \u0434\u0438\u043f\u043b\u043e\u043c\u043d\u043e\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0435."}),Object(j.jsxs)("ul",{className:"techs__description-stack-list",children:[Object(j.jsx)("li",{className:"techs__description-stack",children:"HTML"}),Object(j.jsx)("li",{className:"techs__description-stack",children:"CSS"}),Object(j.jsx)("li",{className:"techs__description-stack",children:"JS"}),Object(j.jsx)("li",{className:"techs__description-stack",children:"React"}),Object(j.jsx)("li",{className:"techs__description-stack",children:"Git"}),Object(j.jsx)("li",{className:"techs__description-stack",children:"Express.js"}),Object(j.jsx)("li",{className:"techs__description-stack",children:"mongoDB"})]})]})]})},O=(n(42),n.p+"static/media/about-me-photo.b72f27fe.jpg");var f=function(){return Object(j.jsxs)("section",{className:"about-me",children:[Object(j.jsx)("h2",{className:"about-me__title",id:"about-me",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"}),Object(j.jsxs)("div",{className:"about-me__student",children:[Object(j.jsxs)("div",{className:"about-me__student-description",children:[Object(j.jsx)("h3",{className:"about-me__student-description-name",children:"\u041c\u0430\u0440\u0430\u0442 \u041a\u0430\u0440\u0438\u043c\u043e\u0432"}),Object(j.jsx)("h4",{className:"about-me__student-description-title",children:"\u0424\u0440\u043e\u043d\u0442\u0435\u043d\u0434-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a"}),Object(j.jsx)("p",{className:"about-me__student-description-text",children:"\u042f \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0449\u0438\u0439 \u0444\u0440\u043e\u043d\u0442\u0435\u043d\u0434-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a. \u0421 \u0443\u0434\u043e\u0432\u043e\u043b\u044c\u0441\u0442\u0432\u0438\u0435\u043c \u043e\u0441\u0432\u0430\u0438\u0432\u0430\u044e \u043d\u043e\u0432\u043e\u0435 \u0434\u043b\u044f \u0441\u0435\u0431\u044f \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 Web-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438. \u041d\u0430\u0446\u0435\u043b\u0435\u043d \u043d\u0430 \u0431\u043e\u043b\u044c\u0448\u0438\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0438\u0432\u043d\u0443\u044e \u0440\u0430\u0431\u043e\u0442\u0443."}),Object(j.jsxs)("ul",{className:"about-me__student-description-links-list",children:[Object(j.jsx)("li",{className:"about-me__student-description-link",children:Object(j.jsx)("a",{className:"about-me__student-description-link-social",href:"https://www.facebook.com/profile.php?id=100011336865067",children:"Facebook"})}),Object(j.jsx)("li",{className:"about-me__student-description-link",children:Object(j.jsx)("a",{className:"about-me__student-description-link-social",href:"https://github.com/miardo",children:"Github"})})]})]}),Object(j.jsx)("img",{className:"about-me__student-photo",src:O,alt:"\u041c\u0430\u0440\u0430\u0442 \u041a\u0430\u0440\u0438\u043c\u043e\u0432"})]})]})},x=(n(43),n.p+"static/media/about-me-link.2f133fb2.svg");var g=function(){return Object(j.jsxs)("section",{className:"portfolio",children:[Object(j.jsx)("h3",{className:"portfolio__title",children:"\u041f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e"}),Object(j.jsxs)("nav",{className:"portfolio__links",children:[Object(j.jsxs)("article",{className:"portfolio__link",children:[Object(j.jsx)("a",{className:"portfolio__link-text",href:"https://github.com/miardo/how-to-learn",children:"\u0421\u0442\u0430\u0442\u0438\u0447\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"}),Object(j.jsx)("img",{className:"portfolio__link-img",src:x,alt:"\u0421\u0442\u0440\u0435\u043b\u043e\u0447\u043a\u0430"})]}),Object(j.jsxs)("article",{className:"portfolio__link",children:[Object(j.jsx)("a",{className:"portfolio__link-text",href:"https://github.com/miardo/russian-travel",children:"\u0410\u0434\u0430\u043f\u0442\u0438\u0432\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"}),Object(j.jsx)("img",{className:"portfolio__link-img",src:x,alt:"\u0421\u0442\u0440\u0435\u043b\u043e\u0447\u043a\u0430"})]}),Object(j.jsxs)("article",{className:"portfolio__link",children:[Object(j.jsx)("a",{className:"portfolio__link-text",href:"https://github.com/miardo/react-mesto-auth",children:"\u041e\u0434\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u0438\u0447\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435"}),Object(j.jsx)("img",{className:"portfolio__link-img",src:x,alt:"\u0421\u0442\u0440\u0435\u043b\u043e\u0447\u043a\u0430"})]})]})]})};var N=function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("main",{children:[Object(j.jsx)(h,{}),Object(j.jsx)(_,{}),Object(j.jsx)(p,{}),Object(j.jsx)(v,{}),Object(j.jsx)(f,{}),Object(j.jsx)(g,{})]})})};n(44);var k=function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],i=n[1],s=Object(c.useState)(!0),o=Object(l.a)(s,2),r=o[0],d=o[1];return Object(j.jsxs)("section",{className:"search",children:[Object(j.jsxs)("form",{className:"search__form",onSubmit:e.saved?function(t){t.preventDefault(),e.onSearchSavedMovies(a)}:function(t){t.preventDefault(),e.onSearchMovies(a)},noValidate:!0,children:[Object(j.jsx)("input",{className:"search__form-input",name:"search",required:!0,type:"text",placeholder:"\u0424\u0438\u043b\u044c\u043c",value:a||"",onChange:function(e){i(e.target.value),d(e.target.checkValidity())}}),Object(j.jsx)("span",{className:"search__form-input-error ".concat(r?"search__form-input-error_hidden":""),children:"\u041d\u0443\u0436\u043d\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e"}),Object(j.jsx)("button",{className:"search__form-button ".concat(0===a.length?"search__form-button_disabled":""),disabled:0===a.length,children:"\u041d\u0430\u0439\u0442\u0438"})]}),Object(j.jsxs)("div",{className:"search__switcher",children:[Object(j.jsx)("input",{type:"checkbox",id:"checkbox",className:"search__switcher-button",onChange:e.onShortMoviesCheck,checked:e.isChecked}),Object(j.jsx)("label",{className:"search__switcher-text",htmlFor:"checkbox",children:"\u041a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043a\u0438"})]})]})},S=(n(45),n(46),function(e){return Object(j.jsx)("div",{className:"preloader ".concat(e.isSearching?"":"preloader_hidden"),children:Object(j.jsx)("div",{className:"preloader__container",children:Object(j.jsx)("span",{className:"preloader__round"})})})}),C=(n(47),n.p+"static/media/movies-card-img.143ef437.png");var y=function(e){var t,n,a,i,s,o,r=Object(d.h)(),m=Object(c.useState)(!1),u=Object(l.a)(m,2),b=u[0],h=(u[1],Object(c.useState)(!1)),_=Object(l.a)(h,2),p=_[0],v=_[1],O={country:e.movie.country||"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",director:e.movie.director||"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",duration:e.movie.duration||0,year:e.movie.year||"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",description:e.movie.description||"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",image:"".concat(null===e.movie.image?"".concat(C):"https://api.nomoreparties.co".concat(null===(t=e.movie.image)||void 0===t?void 0:t.url)),trailer:null===(n=e.movie)||void 0===n?void 0:n.trailerLink,nameRU:e.movie.nameRU||"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",nameEN:e.movie.nameEN||"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",thumbnail:"".concat(null===e.movie.image?"".concat(C):"https://api.nomoreparties.co".concat(null===(a=e.movie.image)||void 0===a||null===(i=a.formats)||void 0===i||null===(s=i.thumbnail)||void 0===s?void 0:s.url)),movieId:e.movie.id},f="".concat(Math.trunc(O.duration/60),"\u0447 ").concat(O.duration%60,"\u043c"),x="".concat(null===e.movie.image?"".concat(C):"https://api.nomoreparties.co".concat(null===(o=e.movie.image)||void 0===o?void 0:o.url)),g=JSON.parse(localStorage.getItem("savedMovies")).find((function(t){return t.nameRU===e.movie.nameRU}));return Object(c.useEffect)((function(){g&&v(!0)}),[g,r]),Object(j.jsxs)("article",{className:"movies-card",children:[Object(j.jsxs)("div",{className:"movies-card__header",children:[Object(j.jsxs)("div",{className:"movies-card__header-text",children:[Object(j.jsx)("h3",{className:"movies-card__header-text-title",children:e.movie.nameRU}),Object(j.jsx)("p",{className:"movies-card__header-text-time",children:f})]}),e.saved?Object(j.jsx)("button",{className:"movies-card__header-favorite ".concat(b?"":"movies-card__header-favorite_delete"),onClick:function(){e.onDeleteMovie(e.movie._id),v(!1)}}):Object(j.jsx)("button",{className:"movies-card__header-favorite ".concat(p?"movies-card__header-favorite_saved":""),onClick:p?function(){v(!1),e.onDeleteMovie(g._id)}:function(){e.onMovieSave(O),v(!0)}})]}),Object(j.jsx)("a",{className:"movies-card__link",href:e.saved?e.movie.trailer:e.movie.trailerLink,children:Object(j.jsx)("img",{className:"movies-card__img",src:e.saved?e.movie.image:x,alt:"{props.movie.nameRU}"})})]})};n(48);var M=function(e){var t,n;return Object(j.jsx)("section",{className:e.saved?"more more_hidden":"more ".concat((null===(t=e.movies)||void 0===t?void 0:t.length)===(null===(n=e.displayedMovies)||void 0===n?void 0:n.length)?"more_hidden":""),children:Object(j.jsx)("button",{className:"more__button",onClick:e.handleMoviesIncrease,children:"\u0415\u0449\u0451"})})};var I=function(e){var t,n,a=Object(c.useState)((function(){var e=window.innerWidth;return e<768?5:e<1024?8:e>1024?12:void 0})),i=Object(l.a)(a,2),s=i[0],o=i[1],r=Object(c.useState)((function(){var e=window.innerWidth;return e<768||e<1024?2:e>1024?3:void 0})),d=Object(l.a)(r,2),m=d[0],u=(d[1],null===(t=e.movies)||void 0===t?void 0:t.slice(0,s));return Object(j.jsxs)("section",{className:"movies-card-list-box",children:[Object(j.jsxs)("div",{className:"movies-card-list",children:[Object(j.jsx)(S,{isSearching:e.isSearching}),Object(j.jsx)("p",{className:"movies-card-list__text ".concat(e.notFound?"":"movies-card-list__text_hidden"),children:"\u0424\u0438\u043b\u044c\u043c\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"}),null===u||void 0===u?void 0:u.map((function(t){if(void 0!==t.movieId||void 0!==t.id)return Object(j.jsx)(y,{movie:t,saved:e.saved,onMovieSave:e.onMovieSave,onDeleteMovie:e.onDeleteMovie,savedMovies:e.savedMovies},e.saved?t.movieId:t.id)}))]}),(null===(n=e.movies)||void 0===n?void 0:n.length)!==(null===u||void 0===u?void 0:u.length)&&!e.saved&&Object(j.jsx)(M,{saved:!1,displayedMovies:u,handleMoviesIncrease:function(){o((function(e){return e+m}))}})]})};var w=function(e){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("main",{children:[Object(j.jsx)(k,{onSearchMovies:e.onSearchMovies,onShortMoviesCheck:e.onShortMoviesCheck,saved:!1,isChecked:e.isShortMoviesChecked}),Object(j.jsx)(I,{movies:e.movies,isSearching:e.isSearching,notFound:e.notFound,onMovieSave:e.onMovieSave,onDeleteMovie:e.onDeleteMovie,saved:!1,savedMovies:e.savedMovies})]})})};var E=function(e){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("main",{children:[Object(j.jsx)(k,{onSearchSavedMovies:e.onSearchSavedMovies,saved:!0,onShortMoviesCheck:e.onShortMoviesCheck,isChecked:e.isShortMoviesChecked}),Object(j.jsx)(I,{saved:!0,movies:e.movies,onDeleteMovie:e.onDeleteMovie})]})})};n(49);var F=function(){var e=Object(d.h)();return Object(j.jsxs)("footer",{className:"footer ".concat(("/saved-movies"===e.pathname||"/movies"===e.pathname||"/"===e.pathname)&&"footer_unhidden"),children:[Object(j.jsx)("p",{className:"footer__text",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c \u0445 BeatFilm."}),Object(j.jsxs)("div",{className:"footer__block",children:[Object(j.jsx)("p",{className:"footer__block-date",children:"\xa9 2021"}),Object(j.jsxs)("ul",{className:"footer__block-links-list",children:[Object(j.jsx)("li",{className:"footer__block-text",children:Object(j.jsx)("a",{className:"footer__block-link",href:"https://practicum.yandex.ru/",children:"\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"})}),Object(j.jsx)("li",{className:"footer__block-text",children:Object(j.jsx)("a",{className:"footer__block-link",href:"https://github.com/miardo",children:"Github"})}),Object(j.jsx)("li",{className:"footer__block-text",children:Object(j.jsx)("a",{className:"footer__block-link",href:"https://www.facebook.com/profile.php?id=100011336865067",children:"Facebook"})})]})]})]})},D=a.a.createContext(),T=(n(50),n(13)),J=n(10);var A=function(){var e=a.a.useState({}),t=Object(l.a)(e,2),n=t[0],c=t[1],i=a.a.useState({}),s=Object(l.a)(i,2),o=s[0],r=s[1],d=a.a.useState(!1),j=Object(l.a)(d,2),m=j[0],u=j[1];return{values:n,setValues:c,handleChange:function(e){var t=e.target,a=t.name,i=t.value;c(Object(J.a)(Object(J.a)({},n),{},Object(T.a)({},a,i))),r(Object(J.a)(Object(J.a)({},o),{},Object(T.a)({},a,t.validationMessage))),u(t.closest("form").checkValidity())},errors:o,isFormValid:m}};var U=function(e){var t=A(),n=t.values,a=t.setValues,i=t.handleChange,s=t.errors,o=t.isFormValid,r=Object(c.useState)(!0),d=Object(l.a)(r,2),m=d[0],u=d[1],b=Object(c.useContext)(D);return Object(c.useEffect)((function(){a(b)}),[b,a]),Object(c.useEffect)((function(){u(e.isUpdate)}),[e.isUpdate,e.onChangeUser]),Object(c.useEffect)((function(){e.isSaving&&u(!0)}),[e.isSaving]),Object(j.jsxs)("section",{className:"profile",children:[Object(j.jsxs)("h2",{className:"profile__title",children:["\u041f\u0440\u0438\u0432\u0435\u0442, ",b.name,"!"]}),Object(j.jsxs)("form",{className:"profile__edit-form",onSubmit:function(t){t.preventDefault(),e.onChangeUser(n.name,n.email)},noValidate:!0,children:[Object(j.jsxs)("article",{className:"profile__edit-form-box",children:[Object(j.jsxs)("div",{className:"profile__edit-form-data",children:[Object(j.jsx)("p",{className:"profile__edit-form-name",children:"\u0418\u043c\u044f"}),Object(j.jsx)("input",{className:"profile__edit-form-input",type:"text",name:"name",required:!0,value:n.name||"",disabled:m,onChange:i})]}),Object(j.jsx)("span",{className:"profile__input-error profile__input-error_form-style",id:"name-error",children:s.name})]}),Object(j.jsxs)("article",{className:"profile__edit-form-box",children:[Object(j.jsxs)("div",{className:"profile__edit-form-data",children:[Object(j.jsx)("p",{className:"profile__edit-form-name",children:"E-mail"}),Object(j.jsx)("input",{className:"profile__edit-form-input",type:"email",name:"email",required:!0,value:n.email||"",disabled:m,onChange:i})]}),Object(j.jsx)("span",{className:"profile__input-error profile__input-error_form-style",id:"email-error",children:s.email})]}),Object(j.jsx)("button",{type:"submit",className:"".concat(m&&"profile__button_hidden"," profile__save-button-text ").concat(o?"":"profile__save-button-text_disabled"),children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(j.jsxs)("ul",{className:"profile__buttons-list",children:[Object(j.jsx)("li",{className:m?"profile__button":"profile__button_hidden",children:Object(j.jsx)("button",{className:"profile__button-text",onClick:function(e){e.preventDefault(),u(!1)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),Object(j.jsx)("li",{className:m?"profile__button":"profile__button_hidden",children:Object(j.jsx)("button",{className:"profile__button-text profile__button-text_acc-exit-style",onClick:e.onSignOut,children:"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"})})]})]})};n(51);var R=function(e){var t=A(),n=t.values,c=t.handleChange,a=t.errors,i=t.isFormValid;return Object(j.jsxs)("section",{className:"login",children:[Object(j.jsx)(o.b,{to:"/",className:"login__logo-link",children:Object(j.jsx)("img",{className:"login__logo",src:u,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})}),Object(j.jsx)("h2",{className:"login__title",children:"\u0420\u0430\u0434\u044b \u0432\u0438\u0434\u0435\u0442\u044c!"}),Object(j.jsxs)("form",{className:"login__edit-form",onSubmit:function(t){t.preventDefault(),e.onLogin(n.password,n.email),e.onClear()},noValidate:!0,children:[Object(j.jsxs)("article",{className:"login__edit-form-box",children:[Object(j.jsx)("p",{className:"login__edit-form-name",children:"E-mail"}),Object(j.jsx)("input",{className:"login__edit-form-input",type:"email",name:"email",placeholder:"Email",autoComplete:"off",value:n.email||"",onChange:c}),Object(j.jsx)("span",{className:"login__input-error",id:"email-error",children:a.email})]}),Object(j.jsxs)("article",{className:"login__edit-form-box",children:[Object(j.jsx)("p",{className:"login__edit-form-name",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(j.jsx)("input",{className:"login__edit-form-input",type:"password",name:"password",placeholder:"",value:n.password||"",onChange:c}),Object(j.jsx)("span",{className:"login__input-error",id:"password-error",children:a.password})]}),Object(j.jsx)("button",{className:"login__save-button-text ".concat(i&&n.email?"":"login__save-button-text_disabled"),type:"submit",disabled:!i,children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(j.jsx)("ul",{className:"login__buttons-list",children:Object(j.jsxs)("li",{className:"login__button",children:[Object(j.jsx)("p",{className:"login__button-text",children:"\u0415\u0449\u0451 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(j.jsx)(o.b,{to:"/signup",className:"login__reg-button-link",onClick:e.onClear,children:Object(j.jsx)("button",{className:"login__button-link",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})]})})]})};n(52);var V=function(e){var t=A(),n=t.values,c=t.handleChange,a=t.errors,i=t.isFormValid;return Object(j.jsxs)("section",{className:"register",children:[Object(j.jsx)(o.b,{to:"/",className:"register__logo-link",children:Object(j.jsx)("img",{className:"register__logo",src:u,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})}),Object(j.jsx)("h2",{className:"register__title",children:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!"}),Object(j.jsxs)("form",{className:"register__edit-form",onSubmit:function(t){t.preventDefault(),e.onRegister(n.name,n.password,n.email),e.onClear()},noValidate:!0,children:[Object(j.jsxs)("article",{className:"register__edit-form-box",children:[Object(j.jsx)("p",{className:"register__edit-form-name",children:"\u0418\u043c\u044f"}),Object(j.jsx)("input",{className:"register__edit-form-input",type:"text",name:"name",placeholder:"\u0418\u043c\u044f",value:n.name||"",required:!0,onChange:c}),Object(j.jsx)("span",{className:"register__input-error",id:"email-error",children:a.name})]}),Object(j.jsxs)("article",{className:"register__edit-form-box",children:[Object(j.jsx)("p",{className:"register__edit-form-name",children:"E-mail"}),Object(j.jsx)("input",{className:"register__edit-form-input",type:"email",name:"email",placeholder:"Email",value:n.email||"",required:!0,onChange:c}),Object(j.jsx)("span",{className:"register__input-error",id:"email-error",children:a.email})]}),Object(j.jsxs)("article",{className:"register__edit-form-box",children:[Object(j.jsx)("p",{className:"register__edit-form-name",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(j.jsx)("input",{className:"register__edit-form-input ".concat(a.password?"register__edit-form-input_error-style":""),type:"password",name:"password",placeholder:"",required:!0,value:n.password||"",onChange:c}),Object(j.jsx)("span",{className:"register__input-error",id:"password-error",children:a.password})]}),Object(j.jsx)("button",{className:"register__save-button-text ".concat(i&&n.email&&n.password&&n.name?"":"register__save-button-text_disabled"),type:"submit",disabled:!i,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(j.jsx)("ul",{className:"register__buttons-list",children:Object(j.jsxs)("li",{className:"register__button",children:[Object(j.jsx)("p",{className:"register__button-text",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(j.jsx)(o.b,{to:"/signin",className:"register__reg-button-link",onClick:e.onClear,children:Object(j.jsx)("button",{className:"register__button-link",children:"\u0412\u043e\u0439\u0442\u0438"})})]})})]})};n(53);var P=function(){var e=Object(d.g)();return Object(j.jsxs)("section",{className:"not-found",children:[Object(j.jsx)("h2",{className:"not-found__title",children:"404"}),Object(j.jsx)("p",{className:"not-found__text",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(j.jsx)("button",{className:"not-found__button",type:"button",onClick:function(){return e.goBack()},children:"\u041d\u0430\u0437\u0430\u0434"})]})};n(54);var q=function(e){return Object(j.jsxs)("div",{className:"info-popup ".concat(!e.popupOpen&&"info-popup_hidden"),children:[Object(j.jsxs)("div",{className:"info-popup__box",children:[Object(j.jsx)("p",{className:"info-popup__title",children:"\u041e\u0448\u0438\u0431\u043a\u0430"}),Object(j.jsx)("button",{className:"info-popup__button",type:"button",onClick:e.closePopup})]}),Object(j.jsx)("p",{className:"info-popup__text",children:e.loginErrorMessage})]})};var B="https://api.diplom.karimov.nomoredomains.monster";function L(e){return fetch("".concat(B,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"".concat(e)},credentials:"include"}).then((function(e){return e.json()})).then((function(e){return e}))}function G(e){return fetch("".concat(B,"/movies"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"".concat(e)},credentials:"include"}).then((function(e){return e.json()})).then((function(e){return e}))}var z=n(23),W=["component"],H=function(e){var t=e.component,n=Object(z.a)(e,W);return Object(j.jsx)(d.b,{children:function(){return n.loggedIn?Object(j.jsx)(t,Object(J.a)({},n)):Object(j.jsx)(d.a,{to:"./signin"})}})};var K=function(){var e=Object(d.g)(),t=Object(d.h)(),n=localStorage.getItem("loggedIn"),a=Object(c.useState)(!0),i=Object(l.a)(a,2),s=i[0],o=i[1],m=Object(c.useState)(""),u=Object(l.a)(m,2),h=u[0],_=u[1],p=Object(c.useState)(""),v=Object(l.a)(p,2),O=v[0],f=v[1],x=Object(c.useState)([]),g=Object(l.a)(x,2),k=g[0],S=g[1],C=Object(c.useState)([]),y=Object(l.a)(C,2),M=y[0],I=y[1],T=Object(c.useState)([]),J=Object(l.a)(T,2),A=J[0],z=J[1],W=Object(c.useState)(!1),K=Object(l.a)(W,2),Q=K[0],X=K[1],Y=Object(c.useState)(!1),Z=Object(l.a)(Y,2),$=Z[0],ee=Z[1],te=Object(c.useState)(!1),ne=Object(l.a)(te,2),ce=ne[0],ae=ne[1],ie=Object(c.useState)(!1),se=Object(l.a)(ie,2),oe=se[0],re=se[1],le=Object(c.useState)(!1),de=Object(l.a)(le,2),je=de[0],me=de[1],ue=Object(c.useState)(""),be=Object(l.a)(ue,2),he=be[0],_e=be[1];function pe(e){ee(e.target.checked)}function ve(t,n){ae(!0),function(e,t){return fetch("".concat(B,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify({password:e,email:t})}).then((function(e){return e.json()})).then((function(e){return e.token&&localStorage.setItem("token",e.token),e}))}(t,n).then((function(t){t.token?(localStorage.setItem("loggedIn","true"),e.push("/movies")):"Bad Request"===t.error?(_e("\u0412\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),me(!0)):t.message&&(_e(t.message),me(!0))})).catch((function(){_e("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a..."),me(!0)})).finally((function(){ae(!1)}))}function Oe(){_e(""),me(!1)}function fe(e,t){var n=[];return e.forEach((function(e){if(e.nameRU.indexOf(t)>-1)return $?e.duration<=40?n.push(e):void 0:n.push(e)})),n}function xe(e){(function(e,t){return fetch("".concat(B,"/movies/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"".concat(e)},credentials:"include"}).then((function(e){return e.json()})).then((function(e){return e}))})(h,e).then((function(){var t=A.filter((function(t){return t._id!==e}));z(t),localStorage.setItem("savedMovies",JSON.stringify(t))})).catch((function(e){console.log(e)}))}return Object(c.useEffect)((function(){!function(){if(localStorage.getItem("token")){var e=localStorage.getItem("token"),t=JSON.parse(localStorage.getItem("movies"));e&&Promise.all([L(e),G(e)]).then((function(e){var n=Object(l.a)(e,2),c=n[0],a=n[1];f(c),_(localStorage.getItem("token"));var i=[].concat(Object(r.a)(A),[a]);localStorage.setItem("savedMovies",JSON.stringify(i)),z((function(e){return[].concat(Object(r.a)(e),[a])})),S(t),localStorage.setItem("loggedIn","true")})).catch((function(e){console.log(e)}))}}()}),[e,n]),Object(c.useEffect)((function(){G(localStorage.getItem("token")).then((function(e){z(e)}))}),[t]),Object(j.jsxs)(D.Provider,{value:O,children:[Object(j.jsx)(b,{}),Object(j.jsxs)(d.d,{children:[Object(j.jsx)(H,{exact:!0,path:"/movies",loggedIn:n,component:w,movies:k,onSearchMovies:function(e){if(X(!0),S([]),re(!1),0===M.length)fetch("".concat("https://api.nomoreparties.co/beatfilm-movies"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e})).then((function(t){I(t);var n=fe(t,e);0===n.length?(re(!0),S([])):(localStorage.setItem("movies",JSON.stringify(n)),S(JSON.parse(localStorage.getItem("movies"))))})).catch((function(){S([])})).finally((function(){X(!1),ee(!1)}));else{var t=fe(M,e);0===t.length?(re(!0),S([]),X(!1),ee(!1)):0!==t.length?(localStorage.setItem("movies",JSON.stringify(t)),S(JSON.parse(localStorage.getItem("movies"))),X(!1),ee(!1)):(S([]),ee(!1))}},isSearching:Q,notFound:oe,onMovieSave:function(e){(function(e,t){return fetch("".concat(B,"/movies"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"".concat(e)},credentials:"include",body:JSON.stringify({country:t.country,director:t.director,duration:t.duration,year:t.year,description:t.description,image:t.image,trailer:t.trailer,nameRU:t.nameRU,nameEN:t.nameEN,thumbnail:t.thumbnail,movieId:t.movieId})}).then((function(e){return e.json()})).then((function(e){return e}))})(h,e).then((function(e){var t=[].concat(Object(r.a)(A),[e]);localStorage.setItem("savedMovies",JSON.stringify(t)),z((function(t){return[].concat(Object(r.a)(t),[e])}))})).catch((function(e){console.log(e)}))},onDeleteMovie:xe,savedMovies:A,onShortMoviesCheck:pe,isShortMoviesChecked:$}),Object(j.jsx)(H,{exact:!0,path:"/saved-movies",loggedIn:n,component:E,movies:A,onDeleteMovie:xe,onSearchSavedMovies:function(e){var t=fe(JSON.parse(localStorage.getItem("savedMovies"))[0],e);z(t)},onShortMoviesCheck:pe,isShortMoviesChecked:$}),Object(j.jsx)(H,{exact:!0,path:"/profile",loggedIn:n,component:U,onSignOut:function(){localStorage.removeItem("loggedIn"),localStorage.removeItem("token"),localStorage.removeItem("movies"),S([]),I([]),e.push("/")},onChangeUser:function(e,t){(function(e,t,n){return fetch("".concat(B,"/users/me"),{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"".concat(e)},credentials:"include",body:JSON.stringify({name:t,email:n})}).then((function(e){return e.json()})).then((function(e){return e}))})(h,e,t).then((function(e){f(e),o(!0)})).catch((function(){_e("\u041f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"),me(!0),o(!1)}))},isUpdate:s,isSaving:ce}),Object(j.jsx)(d.b,{exact:!0,path:"/",children:Object(j.jsx)(N,{})}),Object(j.jsx)(d.b,{path:"/signin",children:Object(j.jsx)(R,{onLogin:ve,onClear:Oe,isSaving:ce})}),Object(j.jsx)(d.b,{path:"/signup",children:Object(j.jsx)(V,{onRegister:function(e,t,n){ae(!0),function(e,t,n){return fetch("".concat(B,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:e,password:t,email:n})}).then((function(e){return e.json()}))}(e,t,n).then((function(e){e._id?ve(t,n):"Bad Request"===e.error?(_e("\u0412\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),me(!0)):e.message&&(_e(e.message),me(!0))})).catch((function(){_e("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a..."),me(!0)})).finally((function(){ae(!1)}))},onClear:Oe,isSaving:ce})}),Object(j.jsx)(d.b,{path:"*",children:Object(j.jsx)(P,{})})]}),Object(j.jsx)(F,{}),Object(j.jsx)(q,{loginErrorMessage:he,popupOpen:je,closePopup:function(){me(!1)}})]})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,56)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),i(e),s(e)}))};s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(o.a,{children:Object(j.jsx)(K,{})})}),document.getElementById("root")),Q()}]),[[55,1,2]]]);
//# sourceMappingURL=main.d871d147.chunk.js.map