(this["webpackJsonpdiplom-frontend"]=this["webpackJsonpdiplom-frontend"]||[]).push([[0],Array(28).concat([function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(20),s=n.n(i),o=n(4),r=(n(28),n(14)),l=n(2),d=(n(29),n(3)),m=(n(30),n(0));var j=function(){var e=Object(d.h)(),t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],i=n[1];return Object(m.jsx)("nav",{className:"navigation ".concat(a&&"navigation_opened-burger-menu"),children:Object(m.jsxs)("div",{className:"navigation__menu ".concat(a&&"navigation__menu_opened-burger-menu"),children:[Object(m.jsx)("button",{className:"navigation__burger-btn ".concat(a&&"navigation__burger-btn_close"),onClick:function(){i(!1===a)}}),Object(m.jsxs)("ul",{className:"navigation__buttons-list ".concat(a&&"navigation__buttons-list_opened-burger-menu"),children:[Object(m.jsx)("li",{className:"navigation__button",children:Object(m.jsx)(o.b,{to:"/",className:"navigation__main-button ".concat("/"===e.pathname&&"navigation__link_active"," ").concat(a&&"navigation__main-button_opened-burger-menu"),children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(m.jsx)("li",{className:"navigation__button",children:Object(m.jsx)(o.b,{to:"/movies",activeClassName:"navigation__link_active",className:"navigation__all-films-button ".concat(a&&"navigation__all-films-button_opened-burger-menu"),children:"\u0424\u0438\u043b\u044c\u043c\u044b"})}),Object(m.jsx)("li",{className:"navigation__button",children:Object(m.jsx)(o.b,{to:"/saved-movies",activeClassName:"navigation__link_active",className:"navigation__saved-films-button ".concat(a&&"navigation__saved-films-button_opened-burger-menu"),children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"})})]}),Object(m.jsx)(o.b,{to:"/profile",className:"navigation__acc ".concat(a&&"navigation__acc_opened-burger-menu"),children:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"})]})})},u=(n(37),n.p+"static/media/header-logo.250bb8ba.svg");var b=function(e){var t=Object(d.h)();return Object(m.jsxs)("header",{className:"header ".concat("/"!==t.pathname&&"header_login"," ").concat(("/saved-movies"===t.pathname||"/movies"===t.pathname||"/"===t.pathname||"/profile"===t.pathname)&&"header_unhidden"),children:[Object(m.jsx)(o.b,{to:"/",className:"header__logo-link",children:Object(m.jsx)("img",{className:"header__logo",src:u,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})}),"/"!==t.pathname||e.loggedIn?Object(m.jsx)(j,{}):Object(m.jsxs)("ul",{className:"header__buttons-list",children:[Object(m.jsx)("li",{className:"header__button",children:Object(m.jsx)(o.b,{to:"/signup",className:"header__reg-button",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),Object(m.jsx)("li",{className:"header__button",children:Object(m.jsx)(o.b,{to:"/signin",className:"header__login-button",children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})};n(38);var h=function(){return Object(m.jsx)("section",{className:"promo",children:Object(m.jsx)("h1",{className:"promo__title",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442\u0430 \u0412\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438."})})};n(39);var _=function(){return Object(m.jsx)("section",{className:"nav-tab",children:Object(m.jsx)("nav",{className:"nav-tab__menu",children:Object(m.jsxs)("ul",{className:"nav-tab__menu-list",children:[Object(m.jsx)("li",{className:"nav-tab__menu-text",children:Object(m.jsx)("a",{href:"#about-project",className:"nav-tab__menu-link",children:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"})}),Object(m.jsx)("li",{className:"nav-tab__menu-text",children:Object(m.jsx)("a",{href:"#techs",className:"nav-tab__menu-link",children:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"})}),Object(m.jsx)("li",{className:"nav-tab__menu-text",children:Object(m.jsx)("a",{href:"#about-me",className:"nav-tab__menu-link",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"})})]})})})};n(40);var p=function(){return Object(m.jsxs)("section",{className:"about-project",children:[Object(m.jsx)("h2",{className:"about-project__title",id:"about-project",children:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"}),Object(m.jsxs)("div",{className:"about-project__description",children:[Object(m.jsxs)("article",{className:"about-project__description-block",children:[Object(m.jsx)("h3",{className:"about-project__description-block-title",children:"\u0414\u0438\u043f\u043b\u043e\u043c\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u043b 5 \u044d\u0442\u0430\u043f\u043e\u0432"}),Object(m.jsx)("p",{className:"about-project__description-block-text",children:"\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u043d\u0430, \u0440\u0430\u0431\u043e\u0442\u0443 \u043d\u0430\u0434 \u0431\u044d\u043a\u0435\u043d\u0434\u043e\u043c, \u0432\u0451\u0440\u0441\u0442\u043a\u0443, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0444\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0438."})]}),Object(m.jsxs)("article",{className:"about-project__description-block",children:[Object(m.jsx)("h3",{className:"about-project__description-block-title",children:"\u041d\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0434\u0438\u043f\u043b\u043e\u043c\u0430 \u0443\u0448\u043b\u043e 5 \u043d\u0435\u0434\u0435\u043b\u044c"}),Object(m.jsx)("p",{className:"about-project__description-block-text",children:"\u0423 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u044d\u0442\u0430\u043f\u0430 \u0431\u044b\u043b \u043c\u044f\u0433\u043a\u0438\u0439 \u0438 \u0436\u0451\u0441\u0442\u043a\u0438\u0439 \u0434\u0435\u0434\u043b\u0430\u0439\u043d, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0443\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0441\u043e\u0431\u043b\u044e\u0434\u0430\u0442\u044c, \u0447\u0442\u043e\u0431\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0449\u0438\u0442\u0438\u0442\u044c\u0441\u044f."})]})]}),Object(m.jsxs)("div",{className:"about-project__timeline",children:[Object(m.jsxs)("article",{className:"about-project__timeline-block",children:[Object(m.jsx)("p",{className:"about-project__timeline-block-header",children:"1 \u043d\u0435\u0434\u0435\u043b\u044f"}),Object(m.jsx)("p",{className:"about-project__timeline-block-footer",children:"Back-end"})]}),Object(m.jsxs)("article",{className:"about-project__timeline-block",children:[Object(m.jsx)("p",{className:"about-project__timeline-block-header about-project__timeline-block-header_style",children:"4 \u043d\u0435\u0434\u0435\u043b\u0438"}),Object(m.jsx)("p",{className:"about-project__timeline-block-footer",children:"Front-end"})]})]})]})};n(41);var v=function(){return Object(m.jsxs)("section",{className:"techs",children:[Object(m.jsx)("h2",{className:"techs__title",id:"techs",children:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"}),Object(m.jsxs)("div",{className:"techs__description",children:[Object(m.jsx)("h3",{className:"techs__description-title",children:"7 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0439"}),Object(m.jsx)("p",{className:"techs__description-text",children:"\u041d\u0430 \u043a\u0443\u0440\u0441\u0435 \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043c\u044b \u043e\u0441\u0432\u043e\u0438\u043b\u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043b\u0438 \u0432 \u0434\u0438\u043f\u043b\u043e\u043c\u043d\u043e\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0435."}),Object(m.jsxs)("ul",{className:"techs__description-stack-list",children:[Object(m.jsx)("li",{className:"techs__description-stack",children:"HTML"}),Object(m.jsx)("li",{className:"techs__description-stack",children:"CSS"}),Object(m.jsx)("li",{className:"techs__description-stack",children:"JS"}),Object(m.jsx)("li",{className:"techs__description-stack",children:"React"}),Object(m.jsx)("li",{className:"techs__description-stack",children:"Git"}),Object(m.jsx)("li",{className:"techs__description-stack",children:"Express.js"}),Object(m.jsx)("li",{className:"techs__description-stack",children:"mongoDB"})]})]})]})},O=(n(42),n.p+"static/media/about-me-photo.b72f27fe.jpg");var f=function(){return Object(m.jsxs)("section",{className:"about-me",children:[Object(m.jsx)("h2",{className:"about-me__title",id:"about-me",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"}),Object(m.jsxs)("div",{className:"about-me__student",children:[Object(m.jsxs)("div",{className:"about-me__student-description",children:[Object(m.jsx)("h3",{className:"about-me__student-description-name",children:"\u041c\u0430\u0440\u0430\u0442 \u041a\u0430\u0440\u0438\u043c\u043e\u0432"}),Object(m.jsx)("h4",{className:"about-me__student-description-title",children:"\u0424\u0440\u043e\u043d\u0442\u0435\u043d\u0434-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a"}),Object(m.jsx)("p",{className:"about-me__student-description-text",children:"\u042f \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0449\u0438\u0439 \u0444\u0440\u043e\u043d\u0442\u0435\u043d\u0434-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a. \u0421 \u0443\u0434\u043e\u0432\u043e\u043b\u044c\u0441\u0442\u0432\u0438\u0435\u043c \u043e\u0441\u0432\u0430\u0438\u0432\u0430\u044e \u043d\u043e\u0432\u043e\u0435 \u0434\u043b\u044f \u0441\u0435\u0431\u044f \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 Web-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438. \u041d\u0430\u0446\u0435\u043b\u0435\u043d \u043d\u0430 \u0431\u043e\u043b\u044c\u0448\u0438\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0438 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0438\u0432\u043d\u0443\u044e \u0440\u0430\u0431\u043e\u0442\u0443."}),Object(m.jsxs)("ul",{className:"about-me__student-description-links-list",children:[Object(m.jsx)("li",{className:"about-me__student-description-link",children:Object(m.jsx)("a",{className:"about-me__student-description-link-social",href:"https://www.facebook.com/profile.php?id=100011336865067",children:"Facebook"})}),Object(m.jsx)("li",{className:"about-me__student-description-link",children:Object(m.jsx)("a",{className:"about-me__student-description-link-social",href:"https://github.com/miardo",children:"Github"})})]})]}),Object(m.jsx)("img",{className:"about-me__student-photo",src:O,alt:"\u041c\u0430\u0440\u0430\u0442 \u041a\u0430\u0440\u0438\u043c\u043e\u0432"})]})]})},x=(n(43),n.p+"static/media/about-me-link.2f133fb2.svg");var g=function(){return Object(m.jsxs)("section",{className:"portfolio",children:[Object(m.jsx)("h3",{className:"portfolio__title",children:"\u041f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e"}),Object(m.jsxs)("nav",{className:"portfolio__links",children:[Object(m.jsxs)("article",{className:"portfolio__link",children:[Object(m.jsx)("a",{className:"portfolio__link-text",href:"https://github.com/miardo/how-to-learn",children:"\u0421\u0442\u0430\u0442\u0438\u0447\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"}),Object(m.jsx)("img",{className:"portfolio__link-img",src:x,alt:"\u0421\u0442\u0440\u0435\u043b\u043e\u0447\u043a\u0430"})]}),Object(m.jsxs)("article",{className:"portfolio__link",children:[Object(m.jsx)("a",{className:"portfolio__link-text",href:"https://github.com/miardo/russian-travel",children:"\u0410\u0434\u0430\u043f\u0442\u0438\u0432\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"}),Object(m.jsx)("img",{className:"portfolio__link-img",src:x,alt:"\u0421\u0442\u0440\u0435\u043b\u043e\u0447\u043a\u0430"})]}),Object(m.jsxs)("article",{className:"portfolio__link",children:[Object(m.jsx)("a",{className:"portfolio__link-text",href:"https://github.com/miardo/react-mesto-auth",children:"\u041e\u0434\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u0438\u0447\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435"}),Object(m.jsx)("img",{className:"portfolio__link-img",src:x,alt:"\u0421\u0442\u0440\u0435\u043b\u043e\u0447\u043a\u0430"})]})]})]})};var N=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("main",{children:[Object(m.jsx)(h,{}),Object(m.jsx)(_,{}),Object(m.jsx)(p,{}),Object(m.jsx)(v,{}),Object(m.jsx)(f,{}),Object(m.jsx)(g,{})]})})};n(44);var k=function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],i=n[1],s=Object(c.useState)(!0),o=Object(l.a)(s,2),r=o[0],d=o[1];return Object(m.jsxs)("section",{className:"search",children:[Object(m.jsxs)("form",{className:"search__form",onSubmit:e.saved?function(t){d(t.target.checkValidity()),t.preventDefault(),a.length>0&&e.onSearchSavedMovies(a)}:function(t){d(t.target.checkValidity()),t.preventDefault(),a.length>0&&e.onSearchMovies(a)},required:!0,noValidate:!0,children:[Object(m.jsx)("input",{className:"search__form-input",name:"search",required:!0,type:"text",minLength:"1",maxLength:"200",placeholder:"\u0424\u0438\u043b\u044c\u043c",value:a||"",onChange:function(e){i(e.target.value)}}),Object(m.jsx)("span",{className:"search__form-input-error ".concat(r?"search__form-input-error_hidden":""),children:"\u041d\u0443\u0436\u043d\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e"}),Object(m.jsx)("button",{className:"search__form-button",children:"\u041d\u0430\u0439\u0442\u0438"})]}),Object(m.jsxs)("div",{className:"search__switcher",children:[Object(m.jsx)("input",{type:"checkbox",id:"checkbox",className:"search__switcher-button",onChange:e.onShortMoviesCheck,checked:e.isChecked}),Object(m.jsx)("label",{className:"search__switcher-text",htmlFor:"checkbox",children:"\u041a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043a\u0438"})]})]})},S=(n(45),n(46),function(e){return Object(m.jsx)("div",{className:"preloader ".concat(e.isSearching?"":"preloader_hidden"),children:Object(m.jsx)("div",{className:"preloader__container",children:Object(m.jsx)("span",{className:"preloader__round"})})})}),C=(n(47),n.p+"static/media/movies-card-img.143ef437.png");var y=function(e){var t,n,a,i,s,o,r=Object(d.h)(),j=Object(c.useState)(!1),u=Object(l.a)(j,2),b=u[0],h=(u[1],Object(c.useState)(!1)),_=Object(l.a)(h,2),p=_[0],v=_[1],O={country:e.movie.country||"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",director:e.movie.director||"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",duration:e.movie.duration||0,year:e.movie.year||"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",description:e.movie.description||"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",image:"".concat(null===e.movie.image?"".concat(C):"https://api.nomoreparties.co".concat(null===(t=e.movie.image)||void 0===t?void 0:t.url)),trailer:null===(n=e.movie)||void 0===n?void 0:n.trailerLink,nameRU:e.movie.nameRU||"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",nameEN:e.movie.nameEN||"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",thumbnail:"".concat(null===e.movie.image?"".concat(C):"https://api.nomoreparties.co".concat(null===(a=e.movie.image)||void 0===a||null===(i=a.formats)||void 0===i||null===(s=i.thumbnail)||void 0===s?void 0:s.url)),movieId:e.movie.id},f="".concat(Math.trunc(O.duration/60),"\u0447 ").concat(O.duration%60,"\u043c"),x="".concat(null===e.movie.image?"".concat(C):"https://api.nomoreparties.co".concat(null===(o=e.movie.image)||void 0===o?void 0:o.url)),g=JSON.parse(localStorage.getItem("savedMovies")).find((function(t){return t.nameRU===e.movie.nameRU}));return Object(c.useEffect)((function(){g&&v(!0)}),[r]),Object(m.jsxs)("article",{className:"movies-card",children:[Object(m.jsxs)("div",{className:"movies-card__header",children:[Object(m.jsxs)("div",{className:"movies-card__header-text",children:[Object(m.jsx)("h3",{className:"movies-card__header-text-title",children:e.movie.nameRU}),Object(m.jsx)("p",{className:"movies-card__header-text-time",children:f})]}),e.saved?Object(m.jsx)("button",{className:"movies-card__header-favorite ".concat(b?"":"movies-card__header-favorite_delete"),onClick:function(){e.onDeleteMovie(e.movie._id),v(!1)}}):Object(m.jsx)("button",{className:"movies-card__header-favorite ".concat(p?"movies-card__header-favorite_saved":""),onClick:p?function(){v(!1),e.onDeleteMovie(g._id)}:function(){e.onMovieSave(O),v(!0)}})]}),Object(m.jsx)("a",{className:"movies-card__link",target:"_blank",rel:"noreferrer",href:e.saved?e.movie.trailer:e.movie.trailerLink,children:Object(m.jsx)("img",{className:"movies-card__img",src:e.saved?e.movie.image:x,alt:"{props.movie.nameRU}"})})]})};n(48);var M=function(e){var t,n;return Object(m.jsx)("section",{className:e.saved?"more more_hidden":"more ".concat((null===(t=e.movies)||void 0===t?void 0:t.length)===(null===(n=e.displayedMovies)||void 0===n?void 0:n.length)?"more_hidden":""),children:Object(m.jsx)("button",{className:"more__button",onClick:e.handleMoviesIncrease,children:"\u0415\u0449\u0451"})})};var w=function(e){var t,n,a=Object(c.useState)((function(){var e=window.innerWidth;return e<768?5:e<1024?8:e>1024?12:void 0})),i=Object(l.a)(a,2),s=i[0],o=i[1],r=Object(c.useState)((function(){var e=window.innerWidth;return e<768||e<1024?2:e>1024?3:void 0})),d=Object(l.a)(r,2),j=d[0],u=(d[1],null===(t=e.movies)||void 0===t?void 0:t.slice(0,s));return Object(m.jsxs)("section",{className:"movies-card-list-box",children:[Object(m.jsxs)("div",{className:"movies-card-list",children:[Object(m.jsx)(S,{isSearching:e.isSearching}),Object(m.jsx)("p",{className:"movies-card-list__text ".concat(e.notFound?"":"movies-card-list__text_hidden"),children:"\u0424\u0438\u043b\u044c\u043c\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"}),null===u||void 0===u?void 0:u.map((function(t){if(void 0!==t.movieId||void 0!==t.id)return Object(m.jsx)(y,{movie:t,saved:e.saved,onMovieSave:e.onMovieSave,onDeleteMovie:e.onDeleteMovie,savedMovies:e.savedMovies},e.saved?t.movieId:t.id)}))]}),(null===(n=e.movies)||void 0===n?void 0:n.length)!==(null===u||void 0===u?void 0:u.length)&&!e.saved&&Object(m.jsx)(M,{saved:!1,displayedMovies:u,handleMoviesIncrease:function(){o((function(e){return e+j}))}})]})};var I=function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("main",{children:[Object(m.jsx)(k,{onSearchMovies:e.onSearchMovies,onShortMoviesCheck:e.onShortMoviesCheck,saved:!1,isChecked:e.isShortMoviesChecked}),Object(m.jsx)(w,{movies:e.movies,isSearching:e.isSearching,notFound:e.notFound,onMovieSave:e.onMovieSave,onDeleteMovie:e.onDeleteMovie,saved:!1,savedMovies:e.savedMovies})]})})};var E=function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("main",{children:[Object(m.jsx)(k,{onSearchSavedMovies:e.onSearchSavedMovies,saved:!0,onShortMoviesCheck:e.onShortMoviesCheck,isChecked:e.isShortMoviesChecked}),Object(m.jsx)(w,{saved:!0,movies:e.movies,onDeleteMovie:e.onDeleteMovie})]})})};n(49);var F=function(){var e=Object(d.h)();return Object(m.jsxs)("footer",{className:"footer ".concat(("/saved-movies"===e.pathname||"/movies"===e.pathname||"/"===e.pathname)&&"footer_unhidden"),children:[Object(m.jsx)("p",{className:"footer__text",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c \u0445 BeatFilm."}),Object(m.jsxs)("div",{className:"footer__block",children:[Object(m.jsx)("p",{className:"footer__block-date",children:"\xa9 2021"}),Object(m.jsxs)("ul",{className:"footer__block-links-list",children:[Object(m.jsx)("li",{className:"footer__block-text",children:Object(m.jsx)("a",{className:"footer__block-link",href:"https://practicum.yandex.ru/",children:"\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"})}),Object(m.jsx)("li",{className:"footer__block-text",children:Object(m.jsx)("a",{className:"footer__block-link",href:"https://github.com/miardo",children:"Github"})}),Object(m.jsx)("li",{className:"footer__block-text",children:Object(m.jsx)("a",{className:"footer__block-link",href:"https://www.facebook.com/profile.php?id=100011336865067",children:"Facebook"})})]})]})]})},D=a.a.createContext(),J=(n(50),n(13)),T=n(10);var A=function(){var e=a.a.useState({}),t=Object(l.a)(e,2),n=t[0],c=t[1],i=a.a.useState({}),s=Object(l.a)(i,2),o=s[0],r=s[1],d=a.a.useState(!1),m=Object(l.a)(d,2),j=m[0],u=m[1];return{values:n,setValues:c,handleChange:function(e){var t=e.target,a=t.name,i=t.value;c(Object(T.a)(Object(T.a)({},n),{},Object(J.a)({},a,i))),r(Object(T.a)(Object(T.a)({},o),{},Object(J.a)({},a,t.validationMessage))),u(t.closest("form").checkValidity())},errors:o,isFormValid:j}};var U=function(e){var t=A(),n=t.values,a=t.setValues,i=t.handleChange,s=t.errors,o=t.isFormValid,r=Object(c.useState)(!0),d=Object(l.a)(r,2),j=d[0],u=d[1],b=Object(c.useContext)(D),h=Object(c.useState)(!1),_=Object(l.a)(h,2),p=_[0],v=_[1];return Object(c.useEffect)((function(){a(b)}),[b,a]),Object(c.useEffect)((function(){u(e.isUpdate)}),[e.isUpdate,e.onChangeUser]),Object(c.useEffect)((function(){e.isSaving&&u(!0)}),[e.isSaving]),Object(c.useEffect)((function(){b.email===n.email&&b.name===n.name?v(!1):v(!0)}),[i]),Object(m.jsxs)("section",{className:"profile",children:[Object(m.jsxs)("h2",{className:"profile__title",children:["\u041f\u0440\u0438\u0432\u0435\u0442, ",b.name,"!"]}),Object(m.jsxs)("form",{className:"profile__edit-form",onSubmit:function(t){t.preventDefault(),e.onChangeUser(n.name,n.email)},children:[Object(m.jsxs)("article",{className:"profile__edit-form-box",children:[Object(m.jsxs)("div",{className:"profile__edit-form-data",children:[Object(m.jsx)("p",{className:"profile__edit-form-name",children:"\u0418\u043c\u044f"}),Object(m.jsx)("input",{className:"profile__edit-form-input",type:"text",name:"name",required:!0,value:n.name||"",disabled:j,onChange:i})]}),Object(m.jsx)("span",{className:"profile__input-error profile__input-error_form-style",id:"name-error",children:s.name})]}),Object(m.jsxs)("article",{className:"profile__edit-form-box",children:[Object(m.jsxs)("div",{className:"profile__edit-form-data",children:[Object(m.jsx)("p",{className:"profile__edit-form-name",children:"E-mail"}),Object(m.jsx)("input",{className:"profile__edit-form-input",type:"email",name:"email",pattern:"^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$",required:!0,value:n.email||"",disabled:j,onChange:i})]}),Object(m.jsx)("span",{className:"profile__input-error profile__input-error_form-style",id:"email-error",children:s.email})]}),Object(m.jsx)("button",{type:"submit",className:"".concat(j&&"profile__button_hidden"," profile__save-button-text ").concat(o&&p?"":"profile__save-button-text_disabled"),disabled:!o||!p,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(m.jsxs)("ul",{className:"profile__buttons-list",children:[Object(m.jsx)("li",{className:j?"profile__button":"profile__button_hidden",children:Object(m.jsx)("button",{className:"profile__button-text",onClick:function(e){e.preventDefault(),u(!1)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),Object(m.jsx)("li",{className:j?"profile__button":"profile__button_hidden",children:Object(m.jsx)("button",{className:"profile__button-text profile__button-text_acc-exit-style",onClick:e.onSignOut,children:"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"})})]})]})};n(51);var L=function(e){var t=A(),n=t.values,c=t.handleChange,a=t.errors,i=t.isFormValid;return Object(m.jsxs)("section",{className:"login",children:[Object(m.jsx)(o.b,{to:"/",className:"login__logo-link",children:Object(m.jsx)("img",{className:"login__logo",src:u,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})}),Object(m.jsx)("h2",{className:"login__title",children:"\u0420\u0430\u0434\u044b \u0432\u0438\u0434\u0435\u0442\u044c!"}),Object(m.jsxs)("form",{className:"login__edit-form",onSubmit:function(t){t.preventDefault(),e.onLogin(n.password,n.email),e.onClear()},children:[Object(m.jsxs)("article",{className:"login__edit-form-box",children:[Object(m.jsx)("p",{className:"login__edit-form-name",children:"E-mail"}),Object(m.jsx)("input",{className:"login__edit-form-input",type:"email",name:"email",pattern:"^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$",placeholder:"Email",autoComplete:"off",value:n.email||"",onChange:c}),Object(m.jsx)("span",{className:"login__input-error",id:"email-error",children:a.email})]}),Object(m.jsxs)("article",{className:"login__edit-form-box",children:[Object(m.jsx)("p",{className:"login__edit-form-name",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(m.jsx)("input",{className:"login__edit-form-input",minLength:"8",type:"password",name:"password",placeholder:"",value:n.password||"",onChange:c}),Object(m.jsx)("span",{className:"login__input-error",id:"password-error",children:a.password})]}),Object(m.jsx)("button",{className:"login__save-button-text ".concat(i&&n.email?"":"login__save-button-text_disabled"),type:"submit",disabled:!i,children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(m.jsx)("ul",{className:"login__buttons-list",children:Object(m.jsxs)("li",{className:"login__button",children:[Object(m.jsx)("p",{className:"login__button-text",children:"\u0415\u0449\u0451 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(m.jsx)(o.b,{to:"/signup",className:"login__reg-button-link",onClick:e.onClear,children:Object(m.jsx)("button",{className:"login__button-link",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})]})})]})};n(52);var R=function(e){var t=A(),n=t.values,c=t.handleChange,a=t.errors,i=t.isFormValid;return Object(m.jsxs)("section",{className:"register",children:[Object(m.jsx)(o.b,{to:"/",className:"register__logo-link",children:Object(m.jsx)("img",{className:"register__logo",src:u,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})}),Object(m.jsx)("h2",{className:"register__title",children:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!"}),Object(m.jsxs)("form",{className:"register__edit-form",onSubmit:function(t){t.preventDefault(),e.onRegister(n.name,n.password,n.email),e.onClear()},children:[Object(m.jsxs)("article",{className:"register__edit-form-box",children:[Object(m.jsx)("p",{className:"register__edit-form-name",children:"\u0418\u043c\u044f"}),Object(m.jsx)("input",{className:"register__edit-form-input",type:"text",name:"name",placeholder:"\u0418\u043c\u044f",value:n.name||"",required:!0,onChange:c}),Object(m.jsx)("span",{className:"register__input-error",id:"email-error",children:a.name})]}),Object(m.jsxs)("article",{className:"register__edit-form-box",children:[Object(m.jsx)("p",{className:"register__edit-form-name",children:"E-mail"}),Object(m.jsx)("input",{className:"register__edit-form-input",type:"email",name:"email",pattern:"^([\\w-]+(?:\\.[\\w-]+)*)@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$",placeholder:"Email",value:n.email||"",required:!0,onChange:c}),Object(m.jsx)("span",{className:"register__input-error",id:"email-error",children:a.email})]}),Object(m.jsxs)("article",{className:"register__edit-form-box",children:[Object(m.jsx)("p",{className:"register__edit-form-name",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(m.jsx)("input",{className:"register__edit-form-input ".concat(a.password?"register__edit-form-input_error-style":""),type:"password",name:"password",minLength:"8",placeholder:"",required:!0,value:n.password||"",onChange:c}),Object(m.jsx)("span",{className:"register__input-error",id:"password-error",children:a.password})]}),Object(m.jsx)("button",{className:"register__save-button-text ".concat(i&&n.email&&n.password&&n.name?"":"register__save-button-text_disabled"),type:"submit",disabled:!i,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(m.jsx)("ul",{className:"register__buttons-list",children:Object(m.jsxs)("li",{className:"register__button",children:[Object(m.jsx)("p",{className:"register__button-text",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(m.jsx)(o.b,{to:"/signin",className:"register__reg-button-link",onClick:e.onClear,children:Object(m.jsx)("button",{className:"register__button-link",children:"\u0412\u043e\u0439\u0442\u0438"})})]})})]})};n(53);var P=function(){var e=Object(d.g)();return Object(m.jsxs)("section",{className:"not-found",children:[Object(m.jsx)("h2",{className:"not-found__title",children:"404"}),Object(m.jsx)("p",{className:"not-found__text",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(m.jsx)("button",{className:"not-found__button",type:"button",onClick:function(){return e.goBack()},children:"\u041d\u0430\u0437\u0430\u0434"})]})};n(54);var z=function(e){return Object(m.jsxs)("div",{className:"info-popup ".concat(!e.popupOpen&&"info-popup_hidden"),children:[Object(m.jsxs)("div",{className:"info-popup__box",children:[Object(m.jsx)("p",{className:"info-popup__title ".concat("\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d"===e.errorMessage&&"info-popup__title_hidden"),children:"\u041e\u0448\u0438\u0431\u043a\u0430"}),Object(m.jsx)("button",{className:"info-popup__button",type:"button",onClick:e.closePopup})]}),Object(m.jsx)("p",{className:"info-popup__text ".concat("\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d"===e.errorMessage&&"info-popup__text_success"),children:e.errorMessage})]})},V=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))};var q="https://api.diplom.karimov.nomoredomains.monster",B=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))};function G(e){return fetch("".concat(q,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"".concat(e)},credentials:"include"}).then(B).then((function(e){return e}))}function W(e){return fetch("".concat(q,"/movies"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"".concat(e)},credentials:"include"}).then(B).then((function(e){return e}))}var $=n(23),H=["component"],K=function(e){var t=e.component,n=Object($.a)(e,H);return Object(m.jsx)(d.b,{children:function(){return n.loggedIn?Object(m.jsx)(t,Object(T.a)({},n)):Object(m.jsx)(d.a,{to:"./signin"})}})};var Q=function(){var e=Object(d.g)(),t=Object(d.h)(),n=localStorage.getItem("loggedIn"),a=Object(c.useState)(!0),i=Object(l.a)(a,2),s=i[0],o=i[1],j=Object(c.useState)(""),u=Object(l.a)(j,2),h=u[0],_=u[1],p=Object(c.useState)(""),v=Object(l.a)(p,2),O=v[0],f=v[1],x=Object(c.useState)([]),g=Object(l.a)(x,2),k=g[0],S=g[1],C=Object(c.useState)([]),y=Object(l.a)(C,2),M=y[0],w=y[1],J=Object(c.useState)([]),T=Object(l.a)(J,2),A=T[0],$=T[1],H=Object(c.useState)(!1),Q=Object(l.a)(H,2),X=Q[0],Y=Q[1],Z=Object(c.useState)(!1),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ce=Object(c.useState)(!1),ae=Object(l.a)(ce,2),ie=ae[0],se=ae[1],oe=Object(c.useState)(!1),re=Object(l.a)(oe,2),le=re[0],de=re[1],me=Object(c.useState)(!1),je=Object(l.a)(me,2),ue=je[0],be=je[1],he=Object(c.useState)(""),_e=Object(l.a)(he,2),pe=_e[0],ve=_e[1];function Oe(e){ne(e.target.checked)}function fe(t,n){se(!0),function(e,t){return fetch("".concat(q,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify({password:e,email:t})}).then(B).then((function(e){return e.token&&localStorage.setItem("token",e.token),e}))}(t,n).then((function(t){t.token?(localStorage.setItem("loggedIn","true"),e.push("/movies")):"Bad Request"===t.error?(ve("\u0412\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),be(!0)):t.message&&(ve(t.message),be(!0))})).catch((function(){ve("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a..."),be(!0)})).finally((function(){se(!1)}))}function xe(){ve(""),be(!1)}function ge(e,t){var n=[];return e.forEach((function(e){if(e.nameRU.toLowerCase().indexOf(t.toLowerCase())>-1)return te?e.duration<=40?n.push(e):void 0:n.push(e)})),n}function Ne(e){(function(e,t){return fetch("".concat(q,"/movies/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"".concat(e)},credentials:"include"}).then(B).then((function(e){return e}))})(h,e).then((function(){var t=A.filter((function(t){return t._id!==e}));$(t),localStorage.setItem("savedMovies",JSON.stringify(t))})).catch((function(e){console.log(e)}))}return Object(c.useEffect)((function(){!function(){if(localStorage.getItem("token")){var e=localStorage.getItem("token"),t=JSON.parse(localStorage.getItem("movies"));e&&Promise.all([G(e),W(e)]).then((function(e){var n=Object(l.a)(e,2),c=n[0],a=n[1];f(c),_(localStorage.getItem("token"));var i=[].concat(Object(r.a)(A),[a]);localStorage.setItem("savedMovies",JSON.stringify(i)),$((function(e){return[].concat(Object(r.a)(e),[a])})),S(t),localStorage.setItem("loggedIn","true")})).catch((function(e){console.log(e)}))}}()}),[e,n]),Object(c.useEffect)((function(){W(localStorage.getItem("token")).then((function(e){$(e)}))}),[t]),Object(m.jsxs)(D.Provider,{value:O,children:[Object(m.jsx)(b,{loggedIn:n}),Object(m.jsxs)(d.d,{children:[Object(m.jsx)(K,{exact:!0,path:"/movies",loggedIn:n,component:I,movies:k,onSearchMovies:function(e){if(Y(!0),S([]),de(!1),0===M.length)fetch("".concat("https://api.nomoreparties.co/beatfilm-movies"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(V).then((function(e){return e})).then((function(t){w(t);var n=ge(t,e);0===n.length?(de(!0),S([])):(localStorage.setItem("movies",JSON.stringify(n)),S(JSON.parse(localStorage.getItem("movies"))))})).catch((function(){S([])})).finally((function(){Y(!1),ne(!1)}));else{var t=ge(M,e);0===t.length?(de(!0),S([]),Y(!1),ne(!1)):0!==t.length?(localStorage.setItem("movies",JSON.stringify(t)),S(JSON.parse(localStorage.getItem("movies"))),Y(!1),ne(!1)):(S([]),ne(!1))}},isSearching:X,notFound:le,onMovieSave:function(e){(function(e,t){return fetch("".concat(q,"/movies"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"".concat(e)},credentials:"include",body:JSON.stringify({country:t.country,director:t.director,duration:t.duration,year:t.year,description:t.description,image:t.image,trailer:t.trailer,nameRU:t.nameRU,nameEN:t.nameEN,thumbnail:t.thumbnail,movieId:t.movieId})}).then(B).then((function(e){return e}))})(h,e).then((function(e){var t=[].concat(Object(r.a)(A),[e]);localStorage.setItem("savedMovies",JSON.stringify(t)),$((function(t){return[].concat(Object(r.a)(t),[e])}))})).catch((function(e){console.log(e)}))},onDeleteMovie:Ne,savedMovies:A,onShortMoviesCheck:Oe,isShortMoviesChecked:te}),Object(m.jsx)(K,{exact:!0,path:"/saved-movies",loggedIn:n,component:E,movies:A,onDeleteMovie:Ne,onSearchSavedMovies:function(e){var t=ge(Array.isArray(JSON.parse(localStorage.getItem("savedMovies"))[0])?JSON.parse(localStorage.getItem("savedMovies"))[0]:JSON.parse(localStorage.getItem("savedMovies")),e);$(t)},onShortMoviesCheck:Oe,isShortMoviesChecked:te}),Object(m.jsx)(K,{exact:!0,path:"/profile",loggedIn:n,component:U,onSignOut:function(){localStorage.removeItem("loggedIn"),localStorage.removeItem("token"),localStorage.removeItem("movies"),$([]),S([]),w([]),e.push("/")},onChangeUser:function(e,t){(function(e,t,n){return fetch("".concat(q,"/users/me"),{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"".concat(e)},credentials:"include",body:JSON.stringify({name:t,email:n})}).then(B).then((function(e){return e}))})(h,e,t).then((function(e){f(e),o(!0),ve("\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d"),be(!0)})).catch((function(){ve("\u041f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"),be(!0),o(!1)}))},isUpdate:s,isSaving:ie}),Object(m.jsx)(d.b,{exact:!0,path:"/",children:Object(m.jsx)(N,{})}),Object(m.jsx)(d.b,{path:"/signin",children:Object(m.jsx)(L,{onLogin:fe,onClear:xe,isSaving:ie})}),Object(m.jsx)(d.b,{path:"/signup",children:Object(m.jsx)(R,{onRegister:function(e,t,n){se(!0),function(e,t,n){return fetch("".concat(q,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:e,password:t,email:n})}).then(B)}(e,t,n).then((function(e){e._id?fe(t,n):"Bad Request"===e.error?(ve("\u0412\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),be(!0)):e.message&&(ve(e.message),be(!0))})).catch((function(){ve("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a..."),be(!0)})).finally((function(){se(!1)}))},onClear:xe,isSaving:ie})}),Object(m.jsx)(d.b,{path:"*",children:Object(m.jsx)(P,{})})]}),Object(m.jsx)(F,{}),Object(m.jsx)(z,{errorMessage:pe,popupOpen:ue,closePopup:function(){be(!1)}})]})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,56)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),i(e),s(e)}))};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(o.a,{children:Object(m.jsx)(Q,{})})}),document.getElementById("root")),X()}]),[[55,1,2]]]);
//# sourceMappingURL=main.09183a38.chunk.js.map